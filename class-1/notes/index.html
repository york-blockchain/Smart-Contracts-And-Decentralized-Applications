<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>Smart Contracts And Decentralized Applications</title>

    <meta name="author" content="Dhruvin Parikh">

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="../../reveal.js/css/reveal.css">
    <link rel="stylesheet" href="../../reveal.js/css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="../../reveal.js/lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? '../../reveal.js/css/print/pdf.css' : '../../reveal.js/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="../reveal.js/lib/js/html5shiv.js"></script>
    <![endif]-->

    <style>
      .reveal .slides h1, .reveal .slides h2, .reveal .slides h3 {
        text-transform: none;
      }

      .two-column {
        display: flex;
        flex-wrap: wrap;
      }

      .two-column em {
        margin: 20px;
      }

      .reveal .big-and-bold {
        font-weight: bold;
        font-size: 135%;
      }

      .reveal .shrunk-a-bit {
        font-size: 90%;
      }

      .reveal .shrunk-a-bit pre {
        width: 100%;
      }

      .reveal pre {
        width: 100%;
      }

      .reveal .highlight {
        color: yellow;
        font-weight: bold;
      }

      .reveal .highlightRed {
        color: red;
        font-weight: bold;
      }
    </style>
  </head>

  <body>
    <div class="reveal">
      <div class="slides">

<!------------------------------------------------------->



<section data-markdown><script type="text/template">

## CSBC 2010 - Smart Contracts And Decentralized Applications

### Class 1: Introduction to Ethereum And Solidity

*Dhruvin Parikh*

</script></section>

<section data-markdown><script type="text/template">
## `$WHOAMI`  
- I am fullstack javascript developer, blockchain developer and an Instructor  
- Senior Blockchain Developer at opty.fi
- Also Adjunct Professor at George Brown College in Blockchain Development Program 
</script></section>

<section data-markdown><script type="text/template">
## Evaluation
- **Quiz** (Today) - 10% 
- **9 Coding Assignments** - 60% (6.67%/assignment)
- **Final Use-Case Assignment** - 30%
</script></section>

<section data-markdown><script type="text/template">

## Class Plan
* Solidity Smart Contracts
    * State Variables
    * Functions
    * Hashing & Typecasting
    * Events
</script></section>

<section data-markdown><script type="text/template">

## Smart contracts

* Computer programs
* Created by transactions
* Have their own ethereum addresses
* Called "autonomous agents"
  * After you send them to the blockchain, they exist forever (unless they self destruct)
  * Anyone can send transactions to them to trigger functionality

</script></section>



<section data-markdown><script type="text/template">

## Smart contract addresses

* A contract's address is the hash of the creator's address and the nonce of the transaction that created it (RLP encoded)
  * So, contracts do not have private keys
* Contracts *do* have nonces
  * Incremented whenever they deploy children contracts (so children contracts have unique addresses)

</script></section>



<section data-markdown><script type="text/template">

## Solidity

* A programming language, like C++ or Python or Javascript
* But designed specially for smart contracts
* Compiles to a special machine called the Ethereum Virtual Machine (EVM) 

</script></section>



<section data-markdown><script type="text/template">

<img src="solc.svg" style="background-color: white" />

</script></section>



<section data-markdown><script type="text/template">

## Structure

```
    // SPDX-License-Identifier: MIT
    pragma solidity ^0.6.10;
    contract MyContractName {
        // code goes here
    }
```

* `pragma` line: What version of solidity you want
  * We'll leave this out of examples, but you should always have it in your code
  * Use at least `0.6.10`: This course does not cover security issues of earlier versions
* `contract`: Everything inside the curly braces is your contract

</script></section>



<section data-markdown><script type="text/template">

## Functions

```
contract SimpleAdder {
    function addOne(uint256 a) public pure returns(uint256) {
        return a + 1;
    }
}
```

* Functions are as in other languages:
  * Accept parameters
  * Perform computations and actions
  * Optionally can return results

</script></section>




<section data-markdown><script type="text/template">

## Types

<pre>
    function addOne(<span class="highlight">uint256</span> a) public pure returns(<span class="highlight">uint256</span>)
</pre>

* Parameters, return values, and variables have types that determine what they can contain
* *uint256*
  * unsigned (can't be negative)
  * integer
  * 256 bits (32 bytes)

</script></section>






<section data-markdown><script type="text/template">

## Access restrictions

<pre>
    function addOne(uint256 a) <span class="highlight">public</span> pure returns(uint256)
</pre>

* Who can call the function
  * *public*: Everyone
  * *private*: Only other functions in this contract
  * *external*: Everyone, except other functions in this contract
  * *internal*: Like *private*, except for inheritance (more later)

</script></section>






<section data-markdown><script type="text/template">

## Storage restrictions

<pre>
    function addOne(uint256 a) public <span class="highlight">pure</span> returns(uint256)
</pre>

* Contracts have a persistent memory called storage (or sometimes state)
* This will preserve values between transactions
  * *pure*: Doesn't read or write to storage
  * *view*: Reads from storage, but does not write
  * None: Reads and writes to storage

</script></section>





<section data-markdown><script type="text/template">

## Primitive types

* **uintX**: `X` is the number of bits: `uint256`, `uint32`
* **intX**: Same as `uintX` except signed (negatives allowed): `int256`, `int64`
* **bytesX**: Fixed size collection of bytes: `bytes32`
* **address**: An Ethereum address (20 bytes)
* **bool**: Boolean: `true` or `false`
* **string**: Dynamic-size collection of characters
* **bytes**: Dynamic-size collection of bytes

</script></section>

<section data-markdown><script type="text/template">

## 15 minute break

</script></section>

<section data-markdown><script type="text/template">

## constructor

<pre class="hljs js">
contract MyContract {
    address owner;

    <span class="highlight">constructor() public {
        owner = msg.sender;
    }</span>

    function doStuff() public {
        require(msg.sender == owner, "only owner can do stuff");
        // do owner stuff
    }
}
</pre>

* Code that is run only once: when contract is created
* Can take arguments, like a regular function

</script></section>

<section data-markdown><script type="text/template">

## Mappings

<pre class="hljs js">
    <span class="highlight">mapping(address => uint256) balance;</span>

    function deposit() public {
        <span class="highlight">balance[msg.sender]</span> += msg.value;
    }
</pre>

* Like a "dictionary" or "hash-table" in other languages
* Values are `0` by default
* In this example:
  * Look-up an `address`, get a `uint256`
  * Do we need to worry about overflow here?

</script></section>




<section data-markdown><script type="text/template">

## Arrays

<pre class="hljs js">
    <span class="highlight">address[] users;</span>

    function addMyself() public {
        <span class="highlight">users.push</span>(msg.sender);
    }

    function richestUser() public view returns(address) {
        address richest = address(0);
        uint256 richestBalance = 0;

        for (uint256 i = 0; i < <span class="highlight">users.length</span>; i++) {
            if (<span class="highlight">users[i]</span>.balance > richestBalance) {
                richest = <span class="highlight">users[i]</span>;
            }
        }

        return richest;
    }
</pre>

</script></section>


<section data-markdown><script type="text/template">

## Strings

<pre class="hljs js">
    <span class="highlight">string</span> name = <span class="highlight">"Alice"</span>;
</pre>

* Solidity supports strings, which are arbitrary length arrays of characters
* Try to avoid using strings, if possible
  * Handling strings in solidity is difficult
  * Long strings cost a lot of gas
  * Better to store a hash of the string

</script></section>



<section data-markdown><script type="text/template">

## Structs

<pre class="hljs js">
    struct Account {
        uint256 balance;
        uint256 lastUpdatedTimestamp;
    }

    struct User {
        string name;
        mapping(address => Account) accounts;
    }
</pre>

* For grouping together multiple values into a single new type
* Can contain other structs, mappings, etc

</script></section>

<section data-markdown><script type="text/template">

## Logs/Events

* Contracts can define events:
<pre class="hljs js">
event LogDeposit(address indexed account, uint256 amount);
</pre>
* That can be `emit`ted inside functions:
<pre class="hljs js">
    function deposit() public {
        // ...
        emit LogDeposit(msg.sender, msg.value);
    }
</pre>
* These logs are not accessible to contracts
* But can be read by dapps that monitor the chain
  * Also useful during development

</script></section>


<section data-markdown><script type="text/template">

## End of Class

</script></section>


<!------------------------------------------------------->


      </div>

    </div>

    <script src="../../reveal.js/lib/js/head.min.js"></script>
    <script src="../../reveal.js/js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        transition: 'none', // none/fade/slide/convex/concave/zoom

	math: {
          mathjax: '../lib/MathJax/MathJax.js',
          config: 'TeX-AMS_SVG-full',
	},

        // Optional reveal.js plugins
        dependencies: [
          { src: '../../reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../../reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: '../../reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: '../../reveal.js/plugin/math/math.js', async: true },
        ]
      });

    </script>

  </body>
</html>